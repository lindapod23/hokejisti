<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Hokejistu Atpazīšanas Spēle</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f4f4;
      text-align: center;
      padding: 30px;
    }

    h2 {
      margin-bottom: 20px;
    }

    .game-container, .team-select, .team-clue {
      display: none;
    }

    .active {
      display: block;
    }

    .images, .names {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 20px;
      margin-bottom: 20px;
    }

    .name-box, .image-box {
      border: 2px dashed #ccc;
      padding: 10px;
      min-width: 100px;
      min-height: 100px;
    }

    .image-box img {
      width: 100px;
      height: 100px;
      object-fit: cover;
    }

    .button {
      padding: 10px 20px;
      background: white;
      border: 2px solid transparent;
      border-radius: 5px;
      cursor: pointer;
      margin-top: 20px;
      font-weight: bold;
    }

    .red {
      color: red;
      border-color: red;
    }

    .blue {
      color: blue;
      border-color: blue;
    }

    .green {
      color: green;
      border-color: green;
    }

    .yellow {
      color: goldenrod;
      border-color: goldenrod;
    }

    .clue {
      font-size: 18px;
      font-weight: bold;
      margin-top: 20px;
      white-space: pre-line;
    }
  </style>
</head>
<body>
  <h2>Atpazīsti hokejistus</h2>

  <div class="game-container active" id="game">
    <div class="images" id="images"></div>
    <div class="names" id="names"></div>
    <button class="button" onclick="checkAnswers()">Check Answers</button>
    <div id="message"></div>
  </div>

  <div class="team-select" id="teamSelect">
    <h3>Choose Your Team</h3>
    <button class="button red" onclick="showClue('red')">Sarkanā komanda</button>
    <button class="button blue" onclick="showClue('blue')">Zilā komanda</button>
    <button class="button green" onclick="showClue('green')">Zaļā komanda</button>
    <button class="button yellow" onclick="showClue('yellow')">Dzeltenā komanda</button>
  </div>

  <div class="team-clue clue" id="teamClue"></div>

  <script>
    const imagesData = [
      { name: 'Martins Laviņš', src: 'img/8fd2cc7a-b120-4d4b-97bd-8f182725f888.png' },
      { name: 'Kristers Gudļevskis', src: 'img/6caa7906-37fc-48fb-aea9-878e30a9c5e9.png' },
      { name: 'Rodrigo Ābols', src: 'ābols.png' },
      { name: 'Mārtiņš Dzierkals', src: 'dzierkals.png' },
      { name: 'Kaspars Daugaviņš', src: 'Daugavins.png' },
      { name: 'Rūdolfs Balcers', src: 'Balcers.png' },
      { name: 'Eduards Tralmaks', src: 'Tralmaks.png' },
      { name: 'Oskars Batņa', src: 'batna.png' },
      { name: 'Rihards Bukarts', src: 'bukarts.png' },
      { name: 'Oskars Cibuļskis', src: 'img/7a789fe5-fc49-44d6-9c0b-6d71d217153d.png' }
    ];

    const imagesDiv = document.getElementById("images");
    const namesDiv = document.getElementById("names");
    let draggedItem = null;

    function shuffle(arr) {
      return arr.sort(() => Math.random() - 0.5);
    }

    function setupGame() {
      const shuffled = shuffle([...imagesData]);
      imagesDiv.innerHTML = '';
      namesDiv.innerHTML = '';
      document.getElementById("message").innerText = '';

      // Setup images
      shuffled.forEach((item, i) => {
        const imgBox = document.createElement("div");
        imgBox.classList.add("image-box");
        imgBox.draggable = true;
        imgBox.id = `img-${i}`;
        imgBox.dataset.name = item.name;
        imgBox.innerHTML = `<img src="${item.src}" alt="${item.name}">`;
        imgBox.addEventListener("dragstart", dragStart);
        imagesDiv.appendChild(imgBox);
      });

      // Setup name boxes
      const nameList = shuffle([...imagesData]);
      nameList.forEach((item) => {
        const nameBox = document.createElement("div");
        nameBox.classList.add("name-box");
        nameBox.dataset.name = item.name;
        nameBox.addEventListener("dragover", dragOver);
        nameBox.addEventListener("drop", drop);
        nameBox.innerText = item.name;
        namesDiv.appendChild(nameBox);
      });
    }

    function dragStart(e) {
      draggedItem = e.currentTarget;
    }

    function dragOver(e) {
      e.preventDefault();
    }

    function drop(e) {
      e.preventDefault();
      // Prevent adding more than one image-box
      const existing = e.currentTarget.querySelector('.image-box');
      if (!existing && draggedItem) {
        e.currentTarget.appendChild(draggedItem);
        draggedItem = null;
      }
    }

    // Allow dragging back to image area
    imagesDiv.addEventListener("dragover", dragOver);
    imagesDiv.addEventListener("drop", function (e) {
      e.preventDefault();
      if (draggedItem) {
        imagesDiv.appendChild(draggedItem);
        draggedItem = null;
      }
    });

    function checkAnswers() {
      const nameBoxes = document.querySelectorAll('.name-box');
      let correct = 0;

      nameBoxes.forEach(box => {
        const imgBox = box.querySelector('.image-box');
        if (imgBox && box.dataset.name === imgBox.dataset.name) {
          correct++;
        }
      });

      if (correct === imagesData.length) {
        document.getElementById("game").classList.remove("active");
        document.getElementById("teamSelect").classList.add("active");
      } else {
        document.getElementById("message").innerText = "❌ Daži neatbilst. Mēģini vēlreiz!";
        setTimeout(() => {
          setupGame();
        }, 1500);
      }
    }

    function showClue(team) {
      const clues = {
        red: "🔴 Super! Tagad varam doties tālāk!\n\nKur saule spīd pat lietainā dienā,\nKur dzīvesprieks ir arī brīvdienā,\nKur dejo un dzied gan lieli, gan mazi,\nTur atradīsi nākamo ceļojuma pieturu.",
        blue: "🔵 Super! Tagad varam doties tālāk!\n\nKur saule spīd pat lietainā dienā,\nKur dzīvesprieks ir arī brīvdienā,\nKur dejo un dzied gan lieli, gan mazi,\nTur atradīsi nākamo ceļojuma pieturu.",
        green: "🟢 Super! Tagad varam doties tālāk!\n\nKur saule spīd pat lietainā dienā,\nKur dzīvesprieks ir arī brīvdienā,\nKur dejo un dzied gan lieli, gan mazi,\nTur atradīsi nākamo ceļojuma pieturu.",
        yellow: "🟡 Super! Tagad varam doties tālāk!\n\nKur saule spīd pat lietainā dienā,\nKur dzīvesprieks ir arī brīvdienā,\nKur dejo un dzied gan lieli, gan mazi,\nTur atradīsi nākamo ceļojuma pieturu."
      };

      document.getElementById("teamSelect").classList.remove("active");
      const clueBox = document.getElementById("teamClue");
      clueBox.className = "team-clue clue active " + team;
      clueBox.innerText = clues[team];
    }

    setupGame();
  </script>
</body>
</html>
